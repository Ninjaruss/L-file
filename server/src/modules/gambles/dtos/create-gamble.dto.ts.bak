import { IsString, IsNumber, IsOptional, IsArray } from 'class-validator';
import { ApiProperty, ApiPropertyOptional } from '@nestjs/swagger';

export class CreateGambleDto {
  @ApiProperty({
    description: 'Name of the gamble/game',
    example: 'One-Card Poker'
  })
  @IsString()
  name: string;

  @ApiProperty({
    description: 'Type of gamble',
    enum: GambleType,
    example: GambleType.CARDS
  })
  @IsEnum(GambleType)
  type: GambleType;

  @ApiProperty({
    description: 'Basic rules of the game',
    example: 'Each player receives one card. Highest card wins.'
  })
  @IsString()
  rules: string;

  @ApiProperty({
    description: 'Condition to win the game',
    example: 'Player with the highest value card wins'
  })
  @IsString()
  winCondition: string;

  @ApiPropertyOptional({
    description: 'Number of rounds in the game',
    example: 3
  })
  @IsOptional()
  @IsNumber()
  rounds?: number;

  @ApiProperty({
    description: 'Type of stake in the game',
    enum: StakeType,
    example: StakeType.MONEY
  })
  @IsEnum(StakeType)
  stakeType: StakeType;

  @ApiPropertyOptional({
    description: 'Detailed description of what is at stake',
    example: '100 million yen'
  })
  @IsOptional()
  @IsString()
  stakeDetails?: string;

  @ApiProperty({
    description: 'IDs of characters participating in the gamble',
    type: [Number],
    example: [1, 2]
  })
  @IsArray()
  participantIds: number[];

  @ApiProperty({
    description: 'IDs of characters who won the gamble',
    type: [Number],
    example: [1]
  })
  @IsArray()
  winnerIds: number[];

  @ApiPropertyOptional({
    description: 'ID of the character who judged/observed the gamble',
    example: 3
  })
  @IsOptional()
  @IsNumber()
  judgeId?: number;

  @ApiProperty({
    description: 'ID of the chapter where this gamble occurs',
    example: 1
  })
  @IsNumber()
  chapterId: number;

  @ApiPropertyOptional({
    description: 'Whether this gamble has Japanese translations',
    example: false
  })
  @IsOptional()
  @IsBoolean()
  isTranslated?: boolean;

  @ApiPropertyOptional({
    description: 'Japanese translation of rules',
  })
  @IsOptional()
  @IsString()
  rulesJp?: string;

  @ApiPropertyOptional({
    description: 'Japanese translation of win condition',
  })
  @IsOptional()
  @IsString()
  winConditionJp?: string;

  @ApiPropertyOptional({
    description: 'Japanese name of the gamble',
  })
  @IsOptional()
  @IsString()
  nameJp?: string;
}
